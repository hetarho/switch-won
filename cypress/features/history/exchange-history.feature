# language: ko
Feature: 환전 내역 조회
  로그인한 사용자가 과거 환전 기록을 확인할 수 있다

  Background:
    Given 사용자가 로그인되어 있다

  Scenario: 환전 내역 목록 조회
    Given 환전 내역이 3건 있다
    When 환전 내역 페이지로 이동한다
    Then 환전 내역 목록이 표시된다
    And 3개의 내역이 표시된다
    And 내역은 최신 순으로 정렬되어 있다

  Scenario: 환전 내역이 없는 경우
    Given 환전 내역이 없다
    When 환전 내역 페이지로 이동한다
    Then "아직 환전 내역이 없습니다" 메시지가 표시된다

  Scenario: 환전 내역 상세 정보 표시
    Given 환전 내역이 있다
    When 환전 내역 페이지로 이동한다
    Then 각 내역에 환전 일시가 표시된다
    And 각 내역에 출발 통화 및 금액이 표시된다
    And 각 내역에 도착 통화 및 금액이 표시된다
    And 각 내역에 적용된 환율이 표시된다
    And 각 내역에 환전 상태가 표시된다

  Scenario: 환전 내역 로딩 상태
    When 환전 내역 페이지로 이동한다
    Then 내역 로딩 스켈레톤 UI가 표시된다
    And 내역이 로드되면 스켈레톤이 사라진다

  Scenario: 환전 내역 조회 실패
    Given 환전 내역 API가 에러를 반환하도록 설정한다
    When 환전 내역 페이지로 이동한다
    Then 에러 메시지 "내역을 불러올 수 없습니다"가 표시된다
    And "재시도" 버튼이 표시된다

  Scenario: 환전 내역 재시도
    Given 환전 내역 API가 에러를 반환하도록 설정한다
    And 환전 내역 페이지로 이동한다
    When "재시도" 버튼을 클릭한다
    Then 환전 내역이 정상적으로 표시된다

  Scenario: 환전 페이지에서 내역 페이지로 이동
    Given 환전 페이지에 접속한다
    When "내역 보기" 버튼을 클릭한다
    Then 환전 내역 페이지로 이동한다
    And 내비게이션에서 "내역" 메뉴가 활성화된다

  Scenario: 환전 내역 페이지에서 환전 페이지로 복귀
    Given 환전 내역 페이지로 이동한다
    When "환전하기" 버튼을 클릭한다
    Then 환전 페이지로 이동한다
    And 내비게이션에서 "환전" 메뉴가 활성화된다

  Scenario: 환전 상태별 표시
    Given 다양한 상태의 환전 내역이 있다
    When 환전 내역 페이지로 이동한다
    Then "성공" 상태의 내역이 표시된다
    And "실패" 상태의 내역이 표시된다
    And "대기" 상태의 내역이 표시된다
    And 각 상태는 구분 가능한 색상으로 표시된다

  Scenario: 환전 금액 포맷팅
    Given 환전 내역이 있다
    When 환전 내역 페이지로 이동한다
    Then KRW 금액은 "₩1,000,000" 형식으로 표시된다
    And USD 금액은 "$500.00" 형식으로 표시된다

  Scenario: 환전 일시 표시 형식
    Given 오늘 환전한 내역이 있다
    And 어제 환전한 내역이 있다
    When 환전 내역 페이지로 이동한다
    Then 오늘 내역은 "오늘 14:30" 형식으로 표시된다
    And 어제 내역은 "어제 10:15" 형식으로 표시된다
    And 이전 내역은 "2025-10-20 09:00" 형식으로 표시된다

